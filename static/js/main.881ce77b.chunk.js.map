{"version":3,"sources":["index.js"],"names":["Square","props","className","onClick","isBlack","isWhite","Row","x","this","rowValues","rowIndex","renderSquare","React","Component","Board","i","squares","renderRow","Game","state","history","createSquares","stepNumber","blackIsNext","isPlaying","isSingleMode","isCpuBlack","Math","random","blackIsPassed","undefined","Array","fill","map","y","slice","copy2dArray","length","selectableCells","getSelectableCells","selectedCell","values","selectableCell","select","putStone","selectedIndex","floor","size","get","from","keys","targets","target","nextPlayer","setState","concat","current","blackStoneCount","whiteStoneCount","row","square","status","btnStartSingle","btnStartMulti","blackStoneCountMessage","String","whiteStoneCountMessage","pass","startSingle","startMulti","handleClick","setTimeout","passArea","document","querySelector","classList","add","remove","putCpuStone","input","output","push","blackSelectableCells","Map","whiteSelectableCells","candidateCells","column","appendSelectableCells","offset","x_start","max","y_start","step","abs","min","isBlackFound","isWhiteFound","isBlackToWhite","isWhiteToBlack","targetCells","candidateCell","key","mapObj","has","set","ReactDOM","render","getElementById"],"mappings":"yMAQA,SAASA,EAAOC,GACd,OACE,sBAAKC,UAAU,SAASC,QAASF,EAAME,QAAvC,UACGF,EAAMG,QAAU,qBAAKF,UAAU,gBAAuB,GACtDD,EAAMI,QAAU,qBAAKH,UAAU,gBAAuB,M,IAKvDI,E,kKACJ,SAAaC,GAAI,IAAD,OACd,OACE,cAACP,EAAD,CACEI,QAASI,KAAKP,MAAMQ,UAAUF,GAAG,GACjCF,QAASG,KAAKP,MAAMQ,UAAUF,GAAG,GACjCJ,QAAS,kBAAM,EAAKF,MAAME,QAAQI,EAAG,EAAKN,MAAMS,e,oBAKtD,WACE,OACE,gCACGF,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,GAClBH,KAAKG,aAAa,U,GArBTC,IAAMC,WA2BlBC,E,+JACJ,SAAUC,GACR,OACE,cAACT,EAAD,CACEI,SAAUK,EACVN,UAAWD,KAAKP,MAAMe,QAAQD,GAC9BZ,QAASK,KAAKP,MAAME,Y,oBAK1B,WACE,OACE,gCACE,qBAAKD,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,KAElB,qBAAKf,UAAU,YAAf,SACGM,KAAKS,UAAU,Y,GApCNL,IAAMC,WA2CpBK,E,kDACJ,WAAYjB,GAAQ,IAAD,8BACjB,cAAMA,IACDkB,MAAQ,CACXC,QAAS,CAAC,CAKRJ,QAAS,EAAKK,kBAEhBC,WAAY,EACZC,aAAa,EACbC,WAAW,EACXC,cAAc,EACdC,WAAaC,KAAKC,SAAW,GAC7BC,mBAAeC,GAfA,E,iDAmBnB,WACE,IAAMd,EAAUe,MAAM,GAAGC,OAAOC,KAAI,kBAAIF,MAAM,GAAGC,OAAOC,KAAI,iBAAK,EAAC,GAAO,SASzE,OAPAjB,EAAQ,GAAG,GAAG,IAAK,EAEnBA,EAAQ,GAAG,GAAG,IAAK,EAEnBA,EAAQ,GAAG,GAAG,IAAK,EAEnBA,EAAQ,GAAG,GAAG,IAAK,EACZA,I,yBAGT,SAAYT,EAAG2B,GACb,GAAK1B,KAAKW,MAAMK,UAAhB,CAIA,IAAMJ,EAAUZ,KAAKW,MAAMC,QAAQe,MAAM,EAAG3B,KAAKW,MAAMG,WAAa,GAEhEN,EAAUoB,EADEhB,EAAQA,EAAQiB,OAAS,GACPrB,SAClC,IAAIA,EAAQkB,GAAG3B,GA3HF,KA2HkBS,EAAQkB,GAAG3B,GA1H7B,MA8HTC,KAAKW,MAAMM,cACZjB,KAAKW,MAAMO,aAAelB,KAAKW,MAAMI,aADxC,CAMA,IAlBgB,EAkBVe,EAAkBC,EAAmBvB,EAASR,KAAKW,MAAMI,aAC3DiB,OAAeV,EAnBH,cAoBaQ,EAAgBG,UApB7B,IAoBhB,2BAAuD,CAAC,IAA7CC,EAA4C,QACrD,GAAIA,EAAeC,OAAOpC,IAAMA,GAAKmC,EAAeC,OAAOT,IAAMA,EAAG,CAClEM,EAAeE,EACf,QAvBY,8BA0BY,qBAAjBF,GAIXhC,KAAKoC,SAASxB,EAASJ,EAASwB,O,yBAGlC,WACE,IAAMpB,EAAUZ,KAAKW,MAAMC,QAAQe,MAAM,EAAG3B,KAAKW,MAAMG,WAAa,GAEhEN,EAAUoB,EADEhB,EAAQA,EAAQiB,OAAS,GACPrB,SAE5BsB,EAAkBC,EAAmBvB,EAASR,KAAKW,MAAMI,aACzDsB,EAAgBlB,KAAKmB,MAAMnB,KAAKC,SAAWU,EAAgBS,MAC7DP,EAAeF,EAAgBU,IAAIjB,MAAMkB,KAAKX,EAAgBY,QAAQL,IAE1ErC,KAAKoC,SAASxB,EAASJ,EAASwB,K,sBAGlC,SAASpB,EAASJ,EAASwB,GACzB,IAAIjC,EAAIiC,EAAaG,OAAOpC,EACxB2B,EAAIM,EAAaG,OAAOT,EAE5B,GAAI1B,KAAKW,MAAMI,YAAa,CAC1BP,EAAQkB,GAAG3B,GArKA,IAqKe,EADA,oBAELiC,EAAaW,SAFR,IAE1B,2BAA2C,CAAC,IAAjCC,EAAgC,QACzCpC,EAAQoC,EAAO,IAAIA,EAAO,IAvKjB,IAuKiC,EAC1CpC,EAAQoC,EAAO,IAAIA,EAAO,IAvKjB,IAuKiC,GAJlB,mCAMrB,CACLpC,EAAQkB,GAAG3B,GA1KA,IA0Ke,EADrB,oBAEgBiC,EAAaW,SAF7B,IAEL,2BAA2C,CAAC,IAAjCC,EAAgC,QACzCpC,EAAQoC,EAAO,IAAIA,EAAO,IA7KjB,IA6KiC,EAC1CpC,EAAQoC,EAAO,IAAIA,EAAO,IA7KjB,IA6KiC,GAJvC,+BAQP,IAAIC,GAAc7C,KAAKW,MAAMI,YACzBC,GAAY,EACZK,OAAgBC,EAEiB,IADLS,EAAmBvB,EAASqC,GAChCN,OAKO,IADLR,EAAmBvB,EAF/CqC,GAAcA,GAGUN,MAEtBM,OAAavB,EACbN,GAAY,GAEZK,GAAiBrB,KAAKW,MAAMI,aAIhCf,KAAK8C,SAAS,CACZlC,QAASA,EAAQmC,OAAO,CAAC,CACvBvC,QAASA,KAEXM,WAAYF,EAAQiB,OACpBd,YAAa8B,EACb7B,UAAWA,EACXK,cAAeA,M,yBAInB,WACE,IAAIH,EAAcC,KAAKC,SAAW,GAElCpB,KAAK8C,SAAS,CACZlC,QAAS,CAAC,CACRJ,QAASR,KAAKa,kBAEhBC,WAAY,EACZC,aAAa,EACbC,WAAW,EACXC,cAAc,EACdC,WAAYA,EACZG,mBAAeC,M,wBAInB,WACEtB,KAAK8C,SAAS,CACZlC,QAAS,CAAC,CACRJ,QAASR,KAAKa,kBAEhBC,WAAY,EACZC,aAAa,EACbC,WAAW,EACXC,cAAc,EACdC,YAAY,EACZG,mBAAeC,M,oBAInB,WAAU,IAAD,SAED0B,EADUhD,KAAKW,MAAMC,QACHZ,KAAKW,MAAMG,YAE/BmC,EAAkB,EAClBC,EAAkB,EALf,cAMWF,EAAQxC,SANnB,IAMP,2BAAmC,CAAC,IAAD,EAAxB2C,EAAwB,sBACZA,GADY,IACjC,2BAA0B,CAAC,IAAhBC,EAAe,QACpBA,EArPK,GAsPPH,IACSG,EAtPF,IAuPPF,KAL6B,gCAN5B,8BAeP,IAGIG,EACAC,EACAC,EALAC,EAAyB,UAAYC,OAAOR,GAC5CS,EAAyB,UAAYD,OAAOP,GAK5CS,EACF,qBAAKjE,UAAU,OAAf,kBAuBF,OAnBI2D,EAFkC,qBAA3BrD,KAAKW,MAAMI,YAChBkC,EAAkBC,EACX,gBACAD,EAAkBC,EAClB,gBAEA,OAGF,iBAAmBlD,KAAKW,MAAMI,YAAc,QAAU,UAAYf,KAAKW,MAAMM,cAAiBjB,KAAKW,MAAMO,aAAelB,KAAKW,MAAMI,YAAe,SAAiB,IAGzKf,KAAKW,MAAMK,YACdsC,EACE,wBAAQ5D,UAAU,aAAaC,QAAS,kBAAM,EAAKiE,eAAnD,4BAEFL,EACE,wBAAQ7D,UAAU,aAAaC,QAAS,kBAAM,EAAKkE,cAAnD,4BAKF,sBAAKnE,UAAU,OAAf,UACE,sBAAKA,UAAU,aAAf,UACE,cAACY,EAAD,CACEE,QAASwC,EAAQxC,QACjBb,QAAS,SAACI,EAAG2B,GAAJ,OAAU,EAAKoC,YAAY/D,EAAG2B,MAEzC,8BAAMiC,OAER,sBAAKjE,UAAU,YAAf,UACE,8BAAM2D,IACN,8BAAMG,IACN,8BAAME,IACN,8BAAMJ,IACN,8BAAMC,Y,gCAMd,WAAsB,IAAD,OACqB,qBAA7BvD,KAAKW,MAAMU,eACpB0C,YAAY,WACV,IAAMC,EAAWC,SAASC,cAAc,SACxCF,EAASG,UAAUC,IAAI,cAEvBL,YAAW,WACTC,EAASG,UAAUE,OAAO,gBACzB,OAED,KAGFrE,KAAKW,MAAMM,cACZjB,KAAKW,MAAMO,aAAelB,KAAKW,MAAMI,aACpCgD,YAAY,WAAO,EAAKO,gBAAkB,S,GA3O/BlE,IAAMC,WAwQzB,SAASuB,EAAY2C,GACnB,IAD0B,EACpBC,EAAS,GADW,cAERD,GAFQ,IAE1B,2BAAyB,CAAC,IAAfpB,EAAc,QACvBqB,EAAOC,KAAP,YAAgBtB,KAHQ,8BAK1B,OAAOqB,EAGT,SAASzC,EAAmBvB,EAASO,GAOnC,IANA,IAAI2D,EAAuB,IAAIC,IAC3BC,EAAuB,IAAID,IAE3BE,EAAiB,GAGZ1B,EAAM,EAAGA,EAAM,EAAGA,IAAO,CAEhC0B,EAAiB,GACjB,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IAC/BD,EAAeJ,KAAK,CAAC1E,EAAG+E,EAAQpD,EAAGyB,IAErC4B,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAG3EA,EAAiB,GACjB,IAAK,IAAIC,EAAS,EAAGA,GAAU,EAAGA,IAChCD,EAAeJ,KAAK,CAAC1E,EAAG+E,EAAQpD,EAAGyB,IAErC4B,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAI7E,IAAK,IAAIC,EAAS,EAAGA,EAAS,EAAGA,IAAU,CAEzCD,EAAiB,GACjB,IAAK,IAAI1B,EAAM,EAAGA,EAAM,EAAGA,IACzB0B,EAAeJ,KAAK,CAAC1E,EAAG+E,EAAQpD,EAAGyB,IAErC4B,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAG3EA,EAAiB,GACjB,IAAK,IAAI1B,EAAM,EAAGA,GAAO,EAAGA,IAC1B0B,EAAeJ,KAAK,CAAC1E,EAAG+E,EAAQpD,EAAGyB,IAErC4B,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAI7E,IAAK,IAAIG,GAAU,EAAGA,GAAU,EAAGA,IAAU,CAC3C,IAAIC,EAAU9D,KAAK+D,IAAI,EAAGF,GACtBG,EAAUhE,KAAK+D,IAAI,GAAIF,GAG3BH,EAAiB,GACjB,IAAK,IAAIO,EAAO,EAAGA,EAAQ,EAAIjE,KAAKkE,IAAIL,GAAUI,IAChDP,EAAeJ,KAAK,CAAC1E,EAAIkF,EAAUG,EAAO1D,EAAIyD,EAAUC,IAE1DL,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAG3EA,EAAiB,GACjB,IAAK,IAAIO,EAAQ,EAAIjE,KAAKkE,IAAIL,GAAUI,GAAQ,EAAGA,IACjDP,EAAeJ,KAAK,CAAC1E,EAAIkF,EAAUG,EAAO1D,EAAIyD,EAAUC,IAE1DL,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAI7E,IAAK,IAAIG,GAAU,EAAGA,GAAU,EAAGA,IAAU,CAC3C,IAAIC,EAAU,EAAI9D,KAAKmE,IAAI,EAAGN,GAC1BG,EAAUhE,KAAK+D,IAAI,EAAGF,GAG1BH,EAAiB,GACjB,IAAK,IAAIO,EAAO,EAAGA,EAAQ,EAAIjE,KAAKkE,IAAIL,GAAUI,IAChDP,EAAeJ,KAAK,CAAC1E,EAAIkF,EAAUG,EAAO1D,EAAIyD,EAAUC,IAE1DL,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAG3EA,EAAiB,GACjB,IAAK,IAAIO,EAAQ,EAAIjE,KAAKkE,IAAIL,GAAUI,GAAQ,EAAGA,IACjDP,EAAeJ,KAAK,CAAC1E,EAAIkF,EAAUG,EAAO1D,EAAIyD,EAAUC,IAE1DL,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAG7E,OAAI9D,EACK2D,EAEAE,EAIX,SAASG,EAAsBvE,EAASkE,EAAsBE,EAAsBC,GAClF,IADkG,EAC9FU,GAAe,EACfC,GAAe,EACfC,GAAiB,EACjBC,GAAiB,EACjBC,EAAc,GALgF,cAOxEd,GAPwE,IAOlG,2BAA0C,CAAC,IAAlCe,EAAiC,QAClCd,EAASc,EAAc7F,EACvBoD,EAAMyC,EAAclE,EAE1B,GAAIlB,EAAQ2C,GAAK2B,GApcJ,GAqcXS,GAAe,EACXC,IACFE,GAAiB,EACjBF,GAAe,EACfC,GAAiB,EACjBE,EAAc,IAEZD,GACFC,EAAYlB,KAAK,CAACK,EAAQ3B,SAEvB,GAAI3C,EAAQ2C,GAAK2B,GA9cX,GA+cXU,GAAe,EACXD,IACFE,GAAiB,EACjBF,GAAe,EACfG,GAAiB,EACjBC,EAAc,IAEZF,GACFE,EAAYlB,KAAK,CAACK,EAAQ3B,QAEvB,CACL,GAAIsC,GAAkBC,EAAgB,CACpC,IAOqB,EAPfG,EAAMpC,OAAOqB,GAAU,IAAMrB,OAAON,GACtC2C,OAASxE,EAMb,IAJEwE,EADEL,EACOf,EAEAE,GAEAmB,IAAIF,IACb,EAAAC,EAAOtD,IAAIqD,GAAKlD,SAAQ8B,KAAxB,oBAAgCkB,SAEhCG,EAAOE,IAAIH,EAAK,CAAC1D,OAAQyD,EAAejD,QAASgD,IAGrDJ,GAAe,EACfC,GAAe,EACfC,GAAiB,EACjBC,GAAiB,EACjBC,EAAc,KApDgF,+BApGpGM,IAASC,OACP,cAACxF,EAAD,IACAuD,SAASkC,eAAe,U","file":"static/js/main.881ce77b.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nconst IS_BLACK = 0;\nconst IS_WHITE = 1;\n\nfunction Square(props) {\n  return (\n    <div className=\"square\" onClick={props.onClick}>\n      {props.isBlack ? <div className=\"stone black\"></div> : ''}\n      {props.isWhite ? <div className=\"stone white\"></div> : ''}\n    </div>\n  );\n}\n\nclass Row extends React.Component {\n  renderSquare(x) {\n    return (\n      <Square \n        isBlack={this.props.rowValues[x][0]}\n        isWhite={this.props.rowValues[x][1]}\n        onClick={() => this.props.onClick(x, this.props.rowIndex)}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {this.renderSquare(0)}\n        {this.renderSquare(1)}\n        {this.renderSquare(2)}\n        {this.renderSquare(3)}\n        {this.renderSquare(4)}\n        {this.renderSquare(5)}\n        {this.renderSquare(6)}\n        {this.renderSquare(7)}\n      </div>\n    );\n  }\n}\n\nclass Board extends React.Component {\n  renderRow(i) {\n    return (\n      <Row \n        rowIndex={i}\n        rowValues={this.props.squares[i]}\n        onClick={this.props.onClick}\n      />\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"board-row\">\n          {this.renderRow(0)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(1)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(2)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(3)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(4)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(5)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(6)}\n        </div>\n        <div className=\"board-row\">\n          {this.renderRow(7)}\n        </div>\n      </div>\n    );\n  }\n}\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [{\n        // horizontal(x): a-h\n        // vertical(y): 1-8\n        // (a1, a2, ..., a8) + (b1, ...) + ... + (..., h8)\n        // each value: [isBlack, isWhite]\n        squares: this.createSquares(),\n      }],\n      stepNumber: 0,\n      blackIsNext: true,\n      isPlaying: false,\n      isSingleMode: false,\n      isCpuBlack: (Math.random() > 0.5),\n      blackIsPassed: undefined,\n    };\n  }\n\n  createSquares() {\n    const squares = Array(8).fill().map(()=>Array(8).fill().map(()=>([false, false])));\n    // d4: white\n    squares[3][3][1] = true;\n    // d5: black\n    squares[3][4][0] = true;\n    // e4: black\n    squares[4][3][0] = true;\n    // e5: white\n    squares[4][4][1] = true;\n    return squares;\n  }\n\n  handleClick(x, y) {\n    if (!this.state.isPlaying) {\n      return;\n    }\n\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\n    const current = history[history.length - 1];\n    let squares = copy2dArray(current.squares);\n    if (squares[y][x][IS_BLACK] || squares[y][x][IS_WHITE]) {\n      return;\n    }\n\n    if (this.state.isSingleMode &&\n      (this.state.isCpuBlack === this.state.blackIsNext)) {\n        // CPU is thinking.\n        return;\n      }\n\n    const selectableCells = getSelectableCells(squares, this.state.blackIsNext);\n    let selectedCell = undefined;\n    for (const selectableCell of selectableCells.values()) {\n      if (selectableCell.select.x === x && selectableCell.select.y === y) {\n        selectedCell = selectableCell;\n        break;\n      }\n    }\n    if (typeof selectedCell === 'undefined') {\n      return;\n    }\n\n    this.putStone(history, squares, selectedCell);\n  }\n\n  putCpuStone() {\n    const history = this.state.history.slice(0, this.state.stepNumber + 1);\n    const current = history[history.length - 1];\n    let squares = copy2dArray(current.squares);\n\n    const selectableCells = getSelectableCells(squares, this.state.blackIsNext);\n    const selectedIndex = Math.floor(Math.random() * selectableCells.size);\n    let selectedCell = selectableCells.get(Array.from(selectableCells.keys())[selectedIndex]);\n\n    this.putStone(history, squares, selectedCell);\n  }\n\n  putStone(history, squares, selectedCell) {\n    let x = selectedCell.select.x;\n    let y = selectedCell.select.y;\n\n    if (this.state.blackIsNext) {\n      squares[y][x][IS_BLACK] = true;\n      for (const target of selectedCell.targets) {\n        squares[target[1]][target[0]][IS_BLACK] = true;\n        squares[target[1]][target[0]][IS_WHITE] = false;\n      }\n    } else {\n      squares[y][x][IS_WHITE] = true;\n      for (const target of selectedCell.targets) {\n        squares[target[1]][target[0]][IS_BLACK] = false;\n        squares[target[1]][target[0]][IS_WHITE] = true;\n      }\n    }\n\n    let nextPlayer = !this.state.blackIsNext;\n    let isPlaying = true;\n    let blackIsPassed = undefined;\n    const selectableCellsOpposite = getSelectableCells(squares, nextPlayer);\n    if (selectableCellsOpposite.size === 0) {\n      // skip\n      nextPlayer = !nextPlayer;\n\n      const selectableCellsMine = getSelectableCells(squares, nextPlayer);\n      if (selectableCellsMine.size === 0) {\n        // game end\n        nextPlayer = undefined;\n        isPlaying = false;\n      } else {\n        blackIsPassed = !this.state.blackIsNext;\n      }\n    }\n\n    this.setState({\n      history: history.concat([{\n        squares: squares,\n      }]),\n      stepNumber: history.length,\n      blackIsNext: nextPlayer,\n      isPlaying: isPlaying,\n      blackIsPassed: blackIsPassed,\n    });\n  }\n\n  startSingle() {\n    let isCpuBlack = (Math.random() > 0.5);\n\n    this.setState({\n      history: [{\n        squares: this.createSquares(),\n      }],\n      stepNumber: 0,\n      blackIsNext: true,\n      isPlaying: true,\n      isSingleMode: true,\n      isCpuBlack: isCpuBlack,\n      blackIsPassed: undefined,\n    })\n  }\n\n  startMulti() {\n    this.setState({\n      history: [{\n        squares: this.createSquares(),\n      }],\n      stepNumber: 0,\n      blackIsNext: true,\n      isPlaying: true,\n      isSingleMode: false,\n      isCpuBlack: false,\n      blackIsPassed: undefined,\n    })\n  }\n\n  render() {\n    const history = this.state.history;\n    const current = history[this.state.stepNumber];\n\n    let blackStoneCount = 0;\n    let whiteStoneCount = 0;\n    for (const row of current.squares) {\n      for (const square of row) {\n        if (square[IS_BLACK]) {\n          blackStoneCount++;\n        } else if (square[IS_WHITE]) {\n          whiteStoneCount++;\n        }\n      }\n    }\n    let blackStoneCountMessage = 'Black: ' + String(blackStoneCount);\n    let whiteStoneCountMessage = 'White: ' + String(whiteStoneCount);\n\n    let status;\n    let btnStartSingle;\n    let btnStartMulti;\n    let pass = (\n      <div className=\"pass\">Pass</div>\n    );\n    if (typeof this.state.blackIsNext === 'undefined') {\n      if (blackStoneCount > whiteStoneCount) {\n        status = 'Winner: Black';\n      } else if (blackStoneCount < whiteStoneCount) {\n        status = 'Winner: White';\n      } else {\n        status = 'Draw';\n      }\n    } else {\n      status = 'Next player: ' + (this.state.blackIsNext ? 'Black' : 'White') + (this.state.isSingleMode ? ((this.state.isCpuBlack === this.state.blackIsNext) ? ' (CPU)' : '') : '');\n    }\n\n    if (!this.state.isPlaying) {\n      btnStartSingle = (\n        <button className='controller' onClick={() => this.startSingle()}>Start (Single)</button>\n      );  \n      btnStartMulti = (\n        <button className='controller' onClick={() => this.startMulti()}>Start (Multi)</button>\n      );  \n    }\n\n    return (\n      <div className=\"game\">\n        <div className=\"game-board\">\n          <Board \n            squares={current.squares}\n            onClick={(x, y) => this.handleClick(x, y)}\n          />\n          <div>{pass}</div>\n        </div>\n        <div className=\"game-info\">\n          <div>{status}</div>\n          <div>{blackStoneCountMessage}</div>\n          <div>{whiteStoneCountMessage}</div>\n          <div>{btnStartSingle}</div>\n          <div>{btnStartMulti}</div>\n        </div>\n      </div>\n    );\n  }\n\n  componentDidUpdate() {\n    if (typeof this.state.blackIsPassed !== 'undefined') {\n      setTimeout((() => {\n        const passArea = document.querySelector('.pass');\n        passArea.classList.add('pass-popup');\n\n        setTimeout(() => {\n          passArea.classList.remove('pass-popup');\n        }, 1000);\n        // alert((!this.state.blackIsNext ? 'Black' : 'White') + ' Pass');\n      }), 300);\n    }\n\n    if (this.state.isSingleMode &&\n      (this.state.isCpuBlack === this.state.blackIsNext)) {\n        setTimeout((() => {this.putCpuStone();}), 1000);\n      }\n  }\n}\n\nSquare.propTypes = {\n  isBlack: PropTypes.bool,\n  isWhite: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nRow.propTypes = {\n  rowIndex: PropTypes.number,\n  rowValues: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool)),\n  onClick: PropTypes.func,\n};\n\nBoard.propTypes = {\n  squares: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool))),\n  onClick: PropTypes.func,\n};\n\n// ========================================\n\nReactDOM.render(\n  <Game />,\n  document.getElementById('root')\n);\n\nfunction copy2dArray(input) {\n  const output = [];\n  for (const row of input) {\n    output.push([...row]);\n  }\n  return output;\n}\n\nfunction getSelectableCells(squares, blackIsNext) {\n  let blackSelectableCells = new Map();\n  let whiteSelectableCells = new Map();\n\n  let candidateCells = [];\n\n  // row direction\n  for (let row = 0; row < 8; row++) {\n    // left to right\n    candidateCells = [];\n    for (let column = 0; column < 8; column++) {\n      candidateCells.push({x: column, y: row});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n\n    // right to left\n    candidateCells = [];\n    for (let column = 7; column >= 0; column--) {\n      candidateCells.push({x: column, y: row});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n  }\n\n  // column direction\n  for (let column = 0; column < 8; column++) {\n    // top to bottom\n    candidateCells = [];\n    for (let row = 0; row < 8; row++) {\n      candidateCells.push({x: column, y: row});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n\n    // bottom to top\n    candidateCells = [];\n    for (let row = 7; row >= 0; row--) {\n      candidateCells.push({x: column, y: row});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n  }\n\n  // top-left to bottom-right direction\n  for (let offset = -5; offset <= 5; offset++) {\n    let x_start = Math.max(0, offset);\n    let y_start = Math.max(0, -offset);\n\n    // top to bottom\n    candidateCells = [];\n    for (let step = 0; step < (8 - Math.abs(offset)); step++) {\n      candidateCells.push({x: (x_start + step), y: (y_start + step)});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n\n    // bottom to top\n    candidateCells = [];\n    for (let step = (7 - Math.abs(offset)); step >= 0; step--) {\n      candidateCells.push({x: (x_start + step), y: (y_start + step)});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n  }\n  \n  // top-right to bottom-left direction\n  for (let offset = -5; offset <= 5; offset++) {\n    let x_start = 7 + Math.min(0, offset);\n    let y_start = Math.max(0, offset);\n\n    // top to bottom\n    candidateCells = [];\n    for (let step = 0; step < (8 - Math.abs(offset)); step++) {\n      candidateCells.push({x: (x_start - step), y: (y_start + step)});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n\n    // bottom to top\n    candidateCells = [];\n    for (let step = (7 - Math.abs(offset)); step >= 0; step--) {\n      candidateCells.push({x: (x_start - step), y: (y_start + step)});\n    }\n    appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells);\n  }\n  \n  if (blackIsNext) {\n    return blackSelectableCells;\n  } else {\n    return whiteSelectableCells;\n  }\n}\n\nfunction appendSelectableCells(squares, blackSelectableCells, whiteSelectableCells, candidateCells) {\n  let isBlackFound = false;\n  let isWhiteFound = false;\n  let isBlackToWhite = false;\n  let isWhiteToBlack = false;\n  let targetCells = [];\n\n  for (let candidateCell of candidateCells) {\n    const column = candidateCell.x;\n    const row = candidateCell.y;\n\n    if (squares[row][column][IS_BLACK]) {\n      isBlackFound = true;\n      if (isWhiteFound) {\n        isWhiteToBlack = true;\n        isWhiteFound = false;\n        isBlackToWhite = false;\n        targetCells = [];\n      }\n      if (isWhiteToBlack) {\n        targetCells.push([column, row]);\n      }\n    } else if (squares[row][column][IS_WHITE]) {\n      isWhiteFound = true;\n      if (isBlackFound) {\n        isBlackToWhite = true;\n        isBlackFound = false;\n        isWhiteToBlack = false;\n        targetCells = [];\n      }\n      if (isBlackToWhite) {\n        targetCells.push([column, row]);\n      }\n    } else {\n      if (isBlackToWhite || isWhiteToBlack) {\n        const key = String(column) + '-' + String(row);\n        let mapObj = undefined;\n        if (isBlackToWhite) {\n          mapObj = blackSelectableCells;\n        } else {\n          mapObj = whiteSelectableCells;\n        }\n        if (mapObj.has(key)) {\n          mapObj.get(key).targets.push(...targetCells);\n        } else {\n          mapObj.set(key, {select: candidateCell, targets: targetCells});\n        }\n      }\n      isBlackFound = false;\n      isWhiteFound = false;\n      isBlackToWhite = false;\n      isWhiteToBlack = false;\n      targetCells = [];\n    }\n  }\n}\n"],"sourceRoot":""}